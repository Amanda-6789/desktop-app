import { MESSAGES, NUM_IMAGES } from './wechat-data'

const INIT_TIME = new Date().getTime()
let msgIndex = 0

function pickRandom(a) {
  return a[Math.floor(Math.random() * a.length)]
}

export function getItem(index) {
  return new Promise(resolve => {
    var item = {
      show: true,
      id: index,
      avatar:
        'data:image/png;base64,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',
      self: Math.random() < 0.1,
      image: Math.random() < 1.0 / 20 ? 'https://wx1.sinaimg.cn/mw690/48d84e6fly1g16rizdn8pj21nw0u04qp.jpg' : '',
      time: new Date(Math.floor(INIT_TIME + msgIndex * 20 * 1000 + Math.random() * 20 * 1000)),
      message: pickRandom(MESSAGES)
    }
    if (item.image === '') {
      return resolve(item)
    }
    var image = new Image()
    image.src = item.image
    image.addEventListener('load', () => {
      resolve(item)
    })
    image.addEventListener('error', () => {
      item.image = ''
      resolve(item)
    })
  })
}

const MAX = 1000

export function fetch(limit, skip) {
  limit = Math.max(30, limit)
  limit + skip > MAX ? (limit -= skip + limit - MAX) : limit
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      var items = []
      for (var i = 0; i < limit; i++) {
        items[i] = getItem(skip + i)
      }
      resolve(Promise.all(items))
    }, 500)
  }).then(list => {
    return {
      list: list,
      count: 1000
    }
  })
}
